---
layout: single
title: Java with Gradle workflow denied issue 해결하기
categories: troubleshooting
tag: [ISSUE, GITHUB_ACTIONS, CI/CD]
toc: true
---

## 빌드 시도 시 denied 문제
![denied issue](https://github.com/user-attachments/assets/0e660572-8982-41a4-ab70-00bb4f24e153)

github actions 상에서 build 과정에서 이미지의 내용에 있는 거부 명령을 받게 되었다.

## 왜 거부를 당했지?
![image](https://github.com/user-attachments/assets/b445ed0b-8db5-4f32-b45c-93bd283723fa)

Gradle 공식문서에 위와 같이 처리를 할 수 있지만 실행 가능하지 않다고 설명이 되어 있고, 해결 명령어를 제시하고 있다.  
[https://docs.gradle.org/current/userguide/troubleshooting.html](https://docs.gradle.org/current/userguide/troubleshooting.html)

## 명령어를 삽입하자.
```yaml
jobs: build: steps: 에서  
- name: Grant execute permission for Gradle
    run: chmod +x ./gradlew
```

저 코드를 삽입하는 것으로 실행 권한을 부여할 수 있게 된다.

**chmod +x ./gradlew 명령어 해석**  
chmod -> 파일 권한 변경 명령어  
'+x' -> 실행 권한 추가 옵션  
'./gradlew' -> 현재 디렉토리에 있는 gradlew 파일 지정

=======
title: Gradle CI MySQL 워크플로우 설정 및 연동 중 문제 해결
categories: actions
tag: [phython, blog, jekyll]
toc: true
---

CI 과정에서 빌드 테스트가 왜 필요한지 의문이 들었다. 왜냐하면 로컬 상에서 빌드가 정상적으로 됐기 때문에 서버에 통합을 요청하면 된다고 생각했기 때문이다.  
하지만 이전에 배포 후 AWS RDS와 MySQL 데이터베이스 연동이 JPA 테이블 작명 규칙을 지키지 않아 연동이 되지 않는 이슈를 겪고 나서 생각지도 못한 다양한 변수들이 있기 때문에 이번 CI/CD 과정에서 빌드 이슈를 차라리 만나서 고생을 하면 좋겠다고 내심 바랬고, 이게 웬걸 즉각적으로 그 소원을 ..... 이룰 수 있게 되었다.

## Gradle CI Database 연동 이슈
![image](https://github.com/user-attachments/assets/4f2648c1-dff8-4a4a-9093-d330e1922354)

로컬 상에서 빌드 테스트에 이상이 없었고, 바로 서버에 CI 요청을 명령했다. 그랬더니 위와 같은 오류가 발생했다. 

## 문제는 데이터베이스 구축
해당 로그를 가지고 분석을 해보니 여러 가지 조건이 겹쳐서 빌드 테스트 과정에서 문제가 발생한 것으로 보였다. 생각하기에 조건 중 데이터베이스 부분도 있었기에 이 부분이 가장 유력하다고 여겼다. 

## 서버용 db 환경 구축하기
**Github marketplace**
![image](https://github.com/user-attachments/assets/44428f49-2d6e-456c-88c2-8826dd160288)
깃허브에서는 남이 만든 actions의 동작들을 라이브러리처럼 사용할 수 있게 별도의 장소를 제공한다. 여기서 mysql의 코드를 복사해서 yml에 통합시키면 된다.

## 이번엔 로컬에서..?